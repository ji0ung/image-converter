- **event_environment={stage / prod}**
- **from_channel={farm}**
- **event_datetime -- {광고 참여 완료 시간} `우리가줌`**
    - 타임스탬프랑 시점 우리가 잡아서 줌
    - 프론트 → 서버 넘겨주기로
    - YYYY-mm-DD HH:MM:SS (KST기준)
- **user_token -- {유저토큰} `점신에서보내줌`**
- **mission_id -- {미션아이디 중복값}**
    - 백엔드에서 미션 참여 api 콜 예정
    - 점신측에서 미션 참여 제한이 있는지
        - **농장을 통해서 점신으로 참여한 경우만 인정되며, 나머지는 해당이 없으므로 누락건에 대해 보상이 되지 않는다**
            - 캐시를 날리거나 브라우저를 새로 킨 경우
            - 어뷰징 될 수 있는 소지가 있는지
- 홈모아 측에서 쿼리 파라미터 스트링 자유롭게 넘겨주기

---

### 5. 포스트백 전송시점

- **광고 참여 완료 후에만 Postback 호출**
- 참여 완료 기준 시점의 유저정보, **타임스탬프 포함**

---

### 6. 참고 사항

- 홈모아 → 점신 방향으로 전달하는 **Query String 구조는 제약 없음**
- 개발/운영 환경에 따라 URL 분기 가능하여 테스트 및 검증 용이


손지영_헤일 <hale@buzzni.com>
2025. 12. 29. AM 10:45 (2일 전)
bizdev, 오선우, 안슬기_넥스, 인용휘_필립, 간달프, 데이브, 브롬에게

선우님 안녕하세요.
버즈니 손지영입니다.

배포 완료 되어 콜백 api 컬 명령어 공유드립니다.

curl -X 'POST' \
  'https://partners-api.hsmoa.com/offerwall/v1/common/postback' \
  -H 'accept: application/json' \
  -H 'X-API-KEY: f1e2d3c4-b5a6-4789-0123-456789abcdef' \
  -d '{"test":"test"}'


*header에 인증키 X-API-KEY: f1e2d3c4-b5a6-4789-0123-456789abcdef 는 필수로 넣어주시길 부탁드립니다.

광고사측에 요청받은 내용 
콜백을 보내려면
유저정보를 넘겨드려야 하는데, 공유해 주신 curl에는 유저정보에 대한 부분이 없는 것 같습니다.
jwt 토큰을 어떻게 쓸지, 어떻게 데이터를 넣어서 드릴지 등 논의가 필요할 것 같습니다. 


1번 아웃랜딩으로 인하여 보안이 필요한 부분인것을 인지했습니다. jwt 토큰을 사용해도 좋습니다. json 정의에 대한 부분 그리고 expireTime 설정, 암호화 키 알려주시면 맞추어 작업 진행해보겠습니다.

IP 는 54.180.18.219 만 사용합니다. (natgateway)

2번 지난번 미팅에서 말씀드린 것처럼 유저가 리워드를 받기 위해 페이지 이동이 이뤄질 때 유니크한 아이디를 넘겨 주시면 그 유니크한 아이디를 트랜잭션 아이디로 처리하면 조금더 트랙킹이 수월할 것으로 예상됩니다.

또한 포스트백 전송시 시간을 timestamp로 전달 드릴 수 있으나 홈쇼핑 모아 서버에서 받은 시간과 차이가 크지 않을 것이라고 예상되어 따로 드릴필요가 없다고 생각합니다.

